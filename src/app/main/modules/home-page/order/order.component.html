<div class="card p-3">
  <form [formGroup]="orderForm" (ngSubmit)="submitOrder()">
    <table class="table table-bordered">
      <thead>
        <tr style="font-size: 11px; font-weight: bold; background-color: #f8f9fa;">
          <th>Order ID</th>
          <th>Party</th>
          <th>Origin</th>
          <th>Destination</th>
          <th>Freight Weight</th>
          <th>Assigned Truck</th>
          <th>Assigned Driver</th>
          <th>Status</th>
          <th>Commission Amount</th>
          <th>Approved By</th>
          <th>Clearance</th>
          <th>Incharge</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <input type="text" formControlName="orderId" class="form-control" readonly>
          </td>
          <td>
            <select formControlName="party" class="form-control">
              <option *ngFor="let party of parties" [value]="party.id">{{ party.partyName }}</option>
            </select>
          </td>
          <td>
            <select formControlName="origin" class="form-control">
              <option *ngFor="let location of routeLocations" [value]="location.id">{{ location.locationName }}</option>
            </select>
          </td>
          <td>
            <select formControlName="destination" class="form-control">
              <option *ngFor="let location of routeLocations" [value]="location.id">{{ location.locationName }}</option>
            </select>
          </td>
          <td>
            <input type="number" formControlName="freightWeight" class="form-control">
          </td>
          <td>
            <select formControlName="assignedTruck" class="form-control">
              <option *ngFor="let truck of trucks" [value]="truck.id">{{ truck.truckNumber }}</option>
            </select>
          </td>
          <td>
            <select formControlName="assignedDriver" class="form-control">
              <option *ngFor="let driver of drivers" [value]="driver.id">{{ driver.driverName }}</option>
            </select>
          </td>
          <td>
            <select formControlName="status" class="form-control">
              <option value="Pending">Pending</option>
              <option value="In Transit">In Transit</option>
              <option value="Completed">Completed</option>
            </select>
          </td>
          <td>
            <input type="number" formControlName="commissionAmount" class="form-control">
          </td>
          <td>
            <input type="text" formControlName="approvedBy" class="form-control">
          </td>
          <td>
            <select formControlName="clearance" class="form-control">
              <option value="Approved">Approved</option>
              <option value="Pending">Pending</option>
            </select>
          </td>
          <td>
            <input type="text" formControlName="incharge" class="form-control">
          </td>
        </tr>
      </tbody>
    </table>
    <button type="submit" class="btn btn-primary btn-sm">{{ orderId ? 'Update Order' : 'Add Order' }}</button>
    <button *ngIf="orderId" type="button" class="btn btn-danger btn-sm" (click)="deleteOrder()">Delete Order</button>
  </form>
</div>

<!-- Orders List Table -->
<div class="card p-3 mt-3">
  <h5>Orders List</h5>
  <table class="table table-bordered">
    <thead>
      <tr style="font-size: 11px; font-weight: bold; background-color: #f8f9fa;">
        <th>Order ID</th>
        <th>Party</th>
        <th>Origin</th>
        <th>Destination</th>
        <th>Freight Weight</th>
        <th>Assigned Truck</th>
        <th>Assigned Driver</th>
        <th>Status</th>
        <th>Commission Amount</th>
        <th>Approved By</th>
        <th>Clearance</th>
        <th>Incharge</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let order of orders">
        <td>{{ order.party ? order.party.partyName : 'N/A' }}</td>
        <td>{{ order.origin ? order.origin.locationName : 'N/A' }}</td>
        <td>{{ order.destination ? order.destination.locationName : 'N/A' }}</td>
        <td>{{ order.freightWeight }}</td>
        <td>{{ order.assignedTruck ? order.assignedTruck.truckNumber : 'N/A' }}</td>
        <td>{{ order.assignedDriver ? order.assignedDriver.driverName : 'N/A' }}</td>
        <td>{{ order.status }}</td>
        <td>{{ order.commissionAmount }}</td>
        <td>{{ order.approvedBy }}</td>
        <td>{{ order.clearance }}</td>
        <td>{{ order.incharge }}</td>
        <td>
          <button class="btn btn-warning btn-sm" (click)="loadOrder()">Edit</button>
          <button class="btn btn-danger btn-sm" (click)="deleteOrder()">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
